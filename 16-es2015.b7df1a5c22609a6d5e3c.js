(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"97Bw":function(t,e,a){"use strict";a.r(e);var n=a("ofXK"),i=a("tyNb"),s=a("+0xr"),o=a("jtHE"),c=a("LRne"),r=a("pLZG"),l=a("Ku73"),b=a("nStZ"),u=a("B7fJ"),m=a("B+LC"),p=a("0OVj"),h=a("17cb"),f=a("MPIC"),d=a("AfTh"),g=a("Mfej"),C=a("MIAC"),D=a("fXoL"),w=a("0IaG"),O=a("xBcV"),$=a("Hbgg"),j=a("rnAf"),y=a("rvYj"),P=a("XiUz"),R=a("a+RD"),k=a("bTqV"),z=a("NFeN"),U=a("zkoq"),T=a("y/O9");function v(t,e){1&t&&(D.Ub(0,"th",18),D.Fc(1," PUESTO "),D.Tb())}function S(t,e){if(1&t&&(D.Ub(0,"td",19),D.Fc(1),D.Tb()),2&t){const t=e.index;D.Cb(1),D.Hc(" ",t+1," ")}}function F(t,e){if(1&t&&(D.Ub(0,"th",24),D.Fc(1),D.Tb()),2&t){const t=D.gc(2).$implicit;D.Cb(1),D.Hc(" ",t.name,"")}}function M(t,e){if(1&t&&(D.Ub(0,"td",25),D.Fc(1),D.Tb()),2&t){const t=e.$implicit,a=D.gc(2).$implicit;D.Cb(1),D.Hc(" ",t[a.property]," ")}}function I(t,e){if(1&t&&(D.Sb(0,21),D.Dc(1,F,2,1,"th",22),D.Dc(2,M,2,1,"td",23),D.Rb()),2&t){const t=D.gc().$implicit;D.mc("matColumnDef",t.property)}}function N(t,e){if(1&t&&(D.Sb(0),D.Dc(1,I,3,1,"ng-container",20),D.Rb()),2&t){const t=e.$implicit;D.Cb(1),D.mc("ngIf",t.isModelProperty)}}function H(t,e){1&t&&(D.Ub(0,"th",18),D.Fc(1," PUNTAJE "),D.Tb())}function x(t,e){if(1&t&&(D.Ub(0,"td",19),D.Fc(1),D.hc(2,"number"),D.Tb()),2&t){const t=e.$implicit;D.Cb(1),D.Hc(" ",D.jc(2,1,(t.n1+t.n2)/2,".2")," ")}}function L(t,e){1&t&&(D.Ub(0,"th",18),D.Fc(1," GANADOR "),D.Tb())}function A(t,e){if(1&t&&(D.Ub(0,"td",19),D.Fc(1),D.Tb()),2&t){const t=e.index;D.Cb(1),D.Hc(" ",0==t?"SI":"NO"," ")}}function E(t,e){1&t&&D.Pb(0,"tr",26)}function B(t,e){if(1&t){const t=D.Vb();D.Ub(0,"tr",27),D.cc("click",(function(){D.wc(t);const a=e.$implicit;return D.gc().updateCustomer(a)})),D.Tb()}}function G(t,e){if(1&t&&(D.Ub(0,"mat-grid-tile"),D.Pb(1,"card-plaza",28),D.Tb()),2&t){const t=e.$implicit,a=D.gc();D.Cb(1),D.mc("plaza",t)("concurso",a.concurso)("departamentoName",a.getDepartamentoName(t.idDepartamento))("rankingMode",!0)}}const J=function(){return["Ranking"]};let V=(()=>{class t{constructor(t,e,a){this.dialog=t,this.route=e,this.router=a,this.subject$=new o.a(1),this.data$=this.subject$.asObservable(),this.subjectConcursos$=new o.a(1),this.dataConcursos$=this.subjectConcursos$.asObservable(),this.subjectPlazas$=new o.a(1),this.dataPlazas$=this.subjectPlazas$.asObservable(),this.subjectDepartamentos$=new o.a(1),this.dataDepartamentos$=this.subjectDepartamentos$.asObservable(),this.columns=[{name:"Puesto",property:"puesto",visible:!0},{name:"NOMBRES",property:"firstName",visible:!0,isModelProperty:!0},{name:"APELLIDOS",property:"lastName",visible:!0,isModelProperty:!0},{name:"puntaje",property:"puntaje",visible:!0},{name:"ganador",property:"ganador",visible:!0}],this.pageSize=100,this.otherRankings=[],this.concursoStr="",this.infoPlaza="",a.events.forEach(t=>{if(t instanceof i.e){let e=`${window.location.protocol}//${window.location.host}${t.url}`;window.open(e,"_self")}})}get visibleColumns(){return this.columns.filter(t=>t.visible).map(t=>t.property)}getData(){return Object(c.a)(m.a.map(t=>new u.a(t)))}getConcursos(){return Object(c.a)(p.a.map(t=>new f.a(t)))}getPlazas(){return Object(c.a)(h.a.map(t=>new d.a(t)))}getDepartamentos(){return Object(c.a)(C.a.map(t=>new g.a(t)))}ngOnInit(){this.idPlaza=+this.route.snapshot.paramMap.get("plaza")||2,this.getPlazas().subscribe(t=>{this.subjectPlazas$.next(t)}),this.dataPlazas$.pipe(Object(r.a)(t=>!!t)).subscribe(t=>{this.plazas=t});let t=this.plazas.find(t=>t.id==this.idPlaza);if(t){this.getRankingUsers(),this.getInfoRanking();let e=this.concursos.find(e=>e.id==t.idConcurso);e&&(this.concurso=e,this.concursoStr=`${e.anio} - ${e.periodo}`);let a=this.departamentos.find(e=>e.id==t.idDepartamento);this.infoPlaza=`PLAZA ${t.id} - ${a?a.nameDepartamento:""}`,this.getOtherRankings()}}getInfoRanking(){this.getConcursos().subscribe(t=>{this.subjectConcursos$.next(t)}),this.dataConcursos$.pipe(Object(r.a)(t=>!!t)).subscribe(t=>{this.concursos=t}),this.getDepartamentos().subscribe(t=>{this.subjectDepartamentos$.next(t)}),this.dataDepartamentos$.pipe(Object(r.a)(t=>!!t)).subscribe(t=>{this.departamentos=t})}getRankingUsers(){this.getData().subscribe(t=>{this.subject$.next(t)}),this.customers=[],this.dataSource=new s.k,this.data$.pipe(Object(r.a)(t=>!!t)).subscribe(t=>{t.sort((t,e)=>{let a=(t.n1+t.n2)/2,n=(e.n1+e.n2)/2;return a>n?-1:a<n?1:0}),t.forEach(t=>{t.idPlaza==this.idPlaza&&(this.customers.push(t),this.dataSource.data.push(t))})})}getOtherRankings(){this.concurso&&this.plazas.forEach(t=>{t.idConcurso==this.concurso.id&&t.id!=this.idPlaza&&this.otherRankings.push(t)})}getDepartamentoName(t){let e=this.departamentos.find(e=>e.id==t);return e?e.nameDepartamento:"Sin departamento"}ngAfterViewInit(){}share(){}onFilterChange(t){this.dataSource&&(t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t)}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)(D.Ob(w.b),D.Ob(i.a),D.Ob(i.f))},t.\u0275cmp=D.Ib({type:t,selectors:[["fury-ranking"]],inputs:{columns:"columns"},decls:28,vars:12,consts:[["mode","card"],[3,"crumbs","current"],["fxLayout","column"],[1,"title-table"],["name","Resultados",3,"columns","filterChange"],[1,"actions"],["type","button","mat-mini-fab","","color","primary",1,"create",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","puesto"],["class","actions-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","puntaje"],["matColumnDef","ganador"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[1,"title-normal"],["fxFlex","","cols","3","rowHeight","30rem","gutterSize","1rem"],["mat-header-cell","",1,"actions-cell"],["mat-cell","",1,"actions-cell"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements",3,"click"],[1,"all-space",3,"plaza","concurso","departamentoName","rankingMode"]],template:function(t,e){1&t&&(D.Ub(0,"fury-page-layout",0),D.Ub(1,"fury-page-layout-header"),D.Pb(2,"fury-breadcrumbs",1),D.Tb(),D.Ub(3,"fury-page-layout-content",2),D.Ub(4,"h4",3),D.Fc(5),D.Tb(),D.Ub(6,"fury-list",4),D.cc("filterChange",(function(t){return e.onFilterChange(t)})),D.Ub(7,"div",5),D.Ub(8,"button",6),D.cc("click",(function(){return e.share()})),D.Ub(9,"mat-icon"),D.Fc(10,"share"),D.Tb(),D.Tb(),D.Tb(),D.Ub(11,"table",7),D.Sb(12,8),D.Dc(13,v,2,0,"th",9),D.Dc(14,S,2,1,"td",10),D.Rb(),D.Dc(15,N,2,1,"ng-container",11),D.Sb(16,12),D.Dc(17,H,2,0,"th",9),D.Dc(18,x,3,4,"td",10),D.Rb(),D.Sb(19,13),D.Dc(20,L,2,0,"th",9),D.Dc(21,A,2,1,"td",10),D.Rb(),D.Dc(22,E,1,0,"tr",14),D.Dc(23,B,1,0,"tr",15),D.Tb(),D.Tb(),D.Ub(24,"h4",16),D.Fc(25,"Otros Rankings"),D.Tb(),D.Ub(26,"mat-grid-list",17),D.Dc(27,G,2,4,"mat-grid-tile",11),D.Tb(),D.Tb(),D.Tb()),2&t&&(D.Cb(2),D.nc("current",e.concursoStr),D.mc("@fadeInRight",void 0)("crumbs",D.pc(11,J)),D.Cb(1),D.mc("@fadeInUp",void 0),D.Cb(2),D.Gc(e.infoPlaza),D.Cb(1),D.mc("columns",e.columns),D.Cb(5),D.mc("dataSource",e.dataSource),D.Cb(4),D.mc("ngForOf",e.columns),D.Cb(7),D.mc("matHeaderRowDef",e.visibleColumns),D.Cb(1),D.mc("matRowDefColumns",e.visibleColumns),D.Cb(4),D.mc("ngForOf",e.otherRankings))},directives:[O.a,$.a,j.a,y.a,P.d,R.a,k.b,z.a,s.j,s.c,s.e,s.b,n.l,s.g,s.i,U.a,P.b,s.d,s.a,n.m,s.f,s.h,U.c,T.a],pipes:[n.f],styles:[".clickable[_ngcontent-%COMP%]{cursor:pointer}.title-table[_ngcontent-%COMP%]{color:#fff;margin-top:0;font-weight:700}.all-space[_ngcontent-%COMP%]{height:100%}.title-normal[_ngcontent-%COMP%]{font-weight:700;margin-top:2rem}"],data:{animation:[l.a,b.a]}}),t})();const _=[{path:"",component:V},{path:":plaza",component:V}];let q=(()=>{class t{}return t.\u0275mod=D.Mb({type:t}),t.\u0275inj=D.Lb({factory:function(e){return new(e||t)},imports:[[i.j.forChild(_)],i.j]}),t})();var K=a("3Pt+"),X=a("KthW"),Z=a("WCGO"),W=a("0jmt"),Y=a("q8Jb"),Q=a("qTB5");a.d(e,"RankingModule",(function(){return tt}));let tt=(()=>{class t{}return t.\u0275mod=D.Mb({type:t}),t.\u0275inj=D.Lb({factory:function(e){return new(e||t)},imports:[[n.c,q,K.f,X.a,Z.a,W.a,Y.a,Q.ConvocatoriaModule]]}),t})()}}]);