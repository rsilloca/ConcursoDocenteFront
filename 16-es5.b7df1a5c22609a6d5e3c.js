function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"97Bw":function(t,e,n){"use strict";n.r(e);var a=n("ofXK"),i=n("tyNb"),c=n("+0xr"),o=n("jtHE"),r=n("LRne"),s=n("pLZG"),u=n("Ku73"),l=n("nStZ"),b=n("B7fJ"),f=n("B+LC"),m=n("0OVj"),p=n("17cb"),h=n("MPIC"),d=n("AfTh"),g=n("Mfej"),C=n("MIAC"),v=n("fXoL"),y=n("0IaG"),D=n("xBcV"),k=n("Hbgg"),w=n("rnAf"),O=n("rvYj"),P=n("XiUz"),j=n("a+RD"),R=n("bTqV"),$=n("NFeN"),z=n("zkoq"),T=n("y/O9");function U(t,e){1&t&&(v.Ub(0,"th",18),v.Fc(1," PUESTO "),v.Tb())}function S(t,e){if(1&t&&(v.Ub(0,"td",19),v.Fc(1),v.Tb()),2&t){var n=e.index;v.Cb(1),v.Hc(" ",n+1," ")}}function F(t,e){if(1&t&&(v.Ub(0,"th",24),v.Fc(1),v.Tb()),2&t){var n=v.gc(2).$implicit;v.Cb(1),v.Hc(" ",n.name,"")}}function M(t,e){if(1&t&&(v.Ub(0,"td",25),v.Fc(1),v.Tb()),2&t){var n=e.$implicit,a=v.gc(2).$implicit;v.Cb(1),v.Hc(" ",n[a.property]," ")}}function I(t,e){if(1&t&&(v.Sb(0,21),v.Dc(1,F,2,1,"th",22),v.Dc(2,M,2,1,"td",23),v.Rb()),2&t){var n=v.gc().$implicit;v.mc("matColumnDef",n.property)}}function _(t,e){if(1&t&&(v.Sb(0),v.Dc(1,I,3,1,"ng-container",20),v.Rb()),2&t){var n=e.$implicit;v.Cb(1),v.mc("ngIf",n.isModelProperty)}}function N(t,e){1&t&&(v.Ub(0,"th",18),v.Fc(1," PUNTAJE "),v.Tb())}function H(t,e){if(1&t&&(v.Ub(0,"td",19),v.Fc(1),v.hc(2,"number"),v.Tb()),2&t){var n=e.$implicit;v.Cb(1),v.Hc(" ",v.jc(2,1,(n.n1+n.n2)/2,".2")," ")}}function x(t,e){1&t&&(v.Ub(0,"th",18),v.Fc(1," GANADOR "),v.Tb())}function L(t,e){if(1&t&&(v.Ub(0,"td",19),v.Fc(1),v.Tb()),2&t){var n=e.index;v.Cb(1),v.Hc(" ",0==n?"SI":"NO"," ")}}function A(t,e){1&t&&v.Pb(0,"tr",26)}function E(t,e){if(1&t){var n=v.Vb();v.Ub(0,"tr",27),v.cc("click",(function(){v.wc(n);var t=e.$implicit;return v.gc().updateCustomer(t)})),v.Tb()}}function B(t,e){if(1&t&&(v.Ub(0,"mat-grid-tile"),v.Pb(1,"card-plaza",28),v.Tb()),2&t){var n=e.$implicit,a=v.gc();v.Cb(1),v.mc("plaza",n)("concurso",a.concurso)("departamentoName",a.getDepartamentoName(n.idDepartamento))("rankingMode",!0)}}var G,J,V=function(){return["Ranking"]},q=((G=function(){function t(e,n,a){_classCallCheck(this,t),this.dialog=e,this.route=n,this.router=a,this.subject$=new o.a(1),this.data$=this.subject$.asObservable(),this.subjectConcursos$=new o.a(1),this.dataConcursos$=this.subjectConcursos$.asObservable(),this.subjectPlazas$=new o.a(1),this.dataPlazas$=this.subjectPlazas$.asObservable(),this.subjectDepartamentos$=new o.a(1),this.dataDepartamentos$=this.subjectDepartamentos$.asObservable(),this.columns=[{name:"Puesto",property:"puesto",visible:!0},{name:"NOMBRES",property:"firstName",visible:!0,isModelProperty:!0},{name:"APELLIDOS",property:"lastName",visible:!0,isModelProperty:!0},{name:"puntaje",property:"puntaje",visible:!0},{name:"ganador",property:"ganador",visible:!0}],this.pageSize=100,this.otherRankings=[],this.concursoStr="",this.infoPlaza="",a.events.forEach((function(t){if(t instanceof i.e){var e="".concat(window.location.protocol,"//").concat(window.location.host).concat(t.url);window.open(e,"_self")}}))}return _createClass(t,[{key:"getData",value:function(){return Object(r.a)(f.a.map((function(t){return new b.a(t)})))}},{key:"getConcursos",value:function(){return Object(r.a)(m.a.map((function(t){return new h.a(t)})))}},{key:"getPlazas",value:function(){return Object(r.a)(p.a.map((function(t){return new d.a(t)})))}},{key:"getDepartamentos",value:function(){return Object(r.a)(C.a.map((function(t){return new g.a(t)})))}},{key:"ngOnInit",value:function(){var t=this;this.idPlaza=+this.route.snapshot.paramMap.get("plaza")||2,this.getPlazas().subscribe((function(e){t.subjectPlazas$.next(e)})),this.dataPlazas$.pipe(Object(s.a)((function(t){return!!t}))).subscribe((function(e){t.plazas=e}));var e=this.plazas.find((function(e){return e.id==t.idPlaza}));if(e){this.getRankingUsers(),this.getInfoRanking();var n=this.concursos.find((function(t){return t.id==e.idConcurso}));n&&(this.concurso=n,this.concursoStr="".concat(n.anio," - ").concat(n.periodo));var a=this.departamentos.find((function(t){return t.id==e.idDepartamento}));this.infoPlaza="PLAZA ".concat(e.id," - ").concat(a?a.nameDepartamento:""),this.getOtherRankings()}}},{key:"getInfoRanking",value:function(){var t=this;this.getConcursos().subscribe((function(e){t.subjectConcursos$.next(e)})),this.dataConcursos$.pipe(Object(s.a)((function(t){return!!t}))).subscribe((function(e){t.concursos=e})),this.getDepartamentos().subscribe((function(e){t.subjectDepartamentos$.next(e)})),this.dataDepartamentos$.pipe(Object(s.a)((function(t){return!!t}))).subscribe((function(e){t.departamentos=e}))}},{key:"getRankingUsers",value:function(){var t=this;this.getData().subscribe((function(e){t.subject$.next(e)})),this.customers=[],this.dataSource=new c.k,this.data$.pipe(Object(s.a)((function(t){return!!t}))).subscribe((function(e){e.sort((function(t,e){var n=(t.n1+t.n2)/2,a=(e.n1+e.n2)/2;return n>a?-1:n<a?1:0})),e.forEach((function(e){e.idPlaza==t.idPlaza&&(t.customers.push(e),t.dataSource.data.push(e))}))}))}},{key:"getOtherRankings",value:function(){var t=this;this.concurso&&this.plazas.forEach((function(e){e.idConcurso==t.concurso.id&&e.id!=t.idPlaza&&t.otherRankings.push(e)}))}},{key:"getDepartamentoName",value:function(t){var e=this.departamentos.find((function(e){return e.id==t}));return e?e.nameDepartamento:"Sin departamento"}},{key:"ngAfterViewInit",value:function(){}},{key:"share",value:function(){}},{key:"onFilterChange",value:function(t){this.dataSource&&(t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t)}},{key:"ngOnDestroy",value:function(){}},{key:"visibleColumns",get:function(){return this.columns.filter((function(t){return t.visible})).map((function(t){return t.property}))}}]),t}()).\u0275fac=function(t){return new(t||G)(v.Ob(y.b),v.Ob(i.a),v.Ob(i.f))},G.\u0275cmp=v.Ib({type:G,selectors:[["fury-ranking"]],inputs:{columns:"columns"},decls:28,vars:12,consts:[["mode","card"],[3,"crumbs","current"],["fxLayout","column"],[1,"title-table"],["name","Resultados",3,"columns","filterChange"],[1,"actions"],["type","button","mat-mini-fab","","color","primary",1,"create",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","puesto"],["class","actions-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","puntaje"],["matColumnDef","ganador"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[1,"title-normal"],["fxFlex","","cols","3","rowHeight","30rem","gutterSize","1rem"],["mat-header-cell","",1,"actions-cell"],["mat-cell","",1,"actions-cell"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements",3,"click"],[1,"all-space",3,"plaza","concurso","departamentoName","rankingMode"]],template:function(t,e){1&t&&(v.Ub(0,"fury-page-layout",0),v.Ub(1,"fury-page-layout-header"),v.Pb(2,"fury-breadcrumbs",1),v.Tb(),v.Ub(3,"fury-page-layout-content",2),v.Ub(4,"h4",3),v.Fc(5),v.Tb(),v.Ub(6,"fury-list",4),v.cc("filterChange",(function(t){return e.onFilterChange(t)})),v.Ub(7,"div",5),v.Ub(8,"button",6),v.cc("click",(function(){return e.share()})),v.Ub(9,"mat-icon"),v.Fc(10,"share"),v.Tb(),v.Tb(),v.Tb(),v.Ub(11,"table",7),v.Sb(12,8),v.Dc(13,U,2,0,"th",9),v.Dc(14,S,2,1,"td",10),v.Rb(),v.Dc(15,_,2,1,"ng-container",11),v.Sb(16,12),v.Dc(17,N,2,0,"th",9),v.Dc(18,H,3,4,"td",10),v.Rb(),v.Sb(19,13),v.Dc(20,x,2,0,"th",9),v.Dc(21,L,2,1,"td",10),v.Rb(),v.Dc(22,A,1,0,"tr",14),v.Dc(23,E,1,0,"tr",15),v.Tb(),v.Tb(),v.Ub(24,"h4",16),v.Fc(25,"Otros Rankings"),v.Tb(),v.Ub(26,"mat-grid-list",17),v.Dc(27,B,2,4,"mat-grid-tile",11),v.Tb(),v.Tb(),v.Tb()),2&t&&(v.Cb(2),v.nc("current",e.concursoStr),v.mc("@fadeInRight",void 0)("crumbs",v.pc(11,V)),v.Cb(1),v.mc("@fadeInUp",void 0),v.Cb(2),v.Gc(e.infoPlaza),v.Cb(1),v.mc("columns",e.columns),v.Cb(5),v.mc("dataSource",e.dataSource),v.Cb(4),v.mc("ngForOf",e.columns),v.Cb(7),v.mc("matHeaderRowDef",e.visibleColumns),v.Cb(1),v.mc("matRowDefColumns",e.visibleColumns),v.Cb(4),v.mc("ngForOf",e.otherRankings))},directives:[D.a,k.a,w.a,O.a,P.d,j.a,R.b,$.a,c.j,c.c,c.e,c.b,a.l,c.g,c.i,z.a,P.b,c.d,c.a,a.m,c.f,c.h,z.c,T.a],pipes:[a.f],styles:[".clickable[_ngcontent-%COMP%]{cursor:pointer}.title-table[_ngcontent-%COMP%]{color:#fff;margin-top:0;font-weight:700}.all-space[_ngcontent-%COMP%]{height:100%}.title-normal[_ngcontent-%COMP%]{font-weight:700;margin-top:2rem}"],data:{animation:[u.a,l.a]}}),G),K=[{path:"",component:q},{path:":plaza",component:q}],X=((J=function t(){_classCallCheck(this,t)}).\u0275mod=v.Mb({type:J}),J.\u0275inj=v.Lb({factory:function(t){return new(t||J)},imports:[[i.j.forChild(K)],i.j]}),J),Z=n("3Pt+"),W=n("KthW"),Y=n("WCGO"),Q=n("0jmt"),tt=n("q8Jb"),et=n("qTB5");n.d(e,"RankingModule",(function(){return at}));var nt,at=((nt=function t(){_classCallCheck(this,t)}).\u0275mod=v.Mb({type:nt}),nt.\u0275inj=v.Lb({factory:function(t){return new(t||nt)},imports:[[a.c,X,Z.f,W.a,Y.a,Q.a,tt.a,et.ConvocatoriaModule]]}),nt)}}]);